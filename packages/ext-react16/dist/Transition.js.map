{"version":3,"sources":["../src/Transition.js"],"names":["Ext","define","extend","xtype","requires","initial","config","type","duration","easing","direction","bindDirectionToLocation","statics","__extreactUpdateConfigsBeforeChildren","location","initialize","newLocation","href","callParent","computeDirection","me","oldLocation","getBindDirectionToLocation","length","indexOf","getDirection","add","items","animations","i","isArray","createAnimations","addAnimationConfigs","arguments","showAnimation","forEach","item","setStyle","visibility","show","originalDestroy","destroy","bind","destroyChild","insert","index","loc","hideAnimation","animatingDestroy","getType","setZIndex","activeAnimation","stop","defer","on","hide","child","setConfig","zIndex","top","left","bottom","right","style","getDuration","getEasing"],"mappings":"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","file":"Transition.js","sourcesContent":["/**\n * Animates the creation and destruction of child elements.  This component is especially\n * useful for animating transitions between routes with react-router. Child elements\n * should be given unique keys to ensure they are properly replaced (and not merely\n * updated) when changes occur.\n *\n * Here is an example of how to use Transition with react-router to create a slide effect\n * when changing routes:\n *\n *      import React from 'react';\n *      import { HashRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\n *      import { Transition } from '@extjs/ext-react';\n *      import NewsFeed from './NewsFeed';\n *      import Article from './Article';\n *\n *      function Layout() {\n *          return (\n *              <Transition>\n *                  <Switch>\n *                      <Route path=\"/articles\" component={NewsFeed}/>\n *                      <Route path=\"/articles/:id\" component={Article}/>\n *                  </Switch>\n *              </Transition>\n *          )\n *      }\n *\n */\nExt.define('Ext.react.Transition', {\n    extend: 'Ext.Container',\n    xtype: 'transition',\n\n    requires: ['Ext.fx.animation.*'],\n\n    initial: true,\n\n    config: {\n        /**\n         * @cfg {\"slide\"/\"reveal\"/\"cover\"/\"fade\"/\"pop\"} type\n         * The type of animation to use.\n         */\n        type: 'slide',\n\n        /**\n         * @cfg {Number}\n         * The duration of animations in milliseconds\n         */\n        duration: 350,\n\n        /**\n         * @cfg {String}\n         * The easing function to use for animations. Valid values are 'ease', 'linear', \n         * ease-in', 'ease-out', 'ease-in-out', or a cubic-bezier curve as defined by CSS.\n         */\n        easing: 'ease',\n\n        /**\n         * @cfg {String}\n         * The direction of the forward animation.\n         */\n        direction: 'left',\n\n        /**\n         * @cfg {Boolean}\n         * Automatically switch directions based on browser URL changes. This should\n         * generally be set to true when animating transitions based on client-side routing.\n         */\n        bindDirectionToLocation: true\n    },\n\n    statics: {\n        __extreactUpdateConfigsBeforeChildren: {\n            location: true,\n            direction: true\n        }\n    },\n\n    initialize: function () {\n        this.newLocation = location.href;\n        this.callParent();\n    },\n\n    computeDirection: function () {\n        var me = this,\n            newLocation, oldLocation;\n\n        if (me.getBindDirectionToLocation()) {\n            newLocation = me.newLocation || '';\n            oldLocation = me.oldLocation || '';\n\n            if (newLocation.length > oldLocation.length && !newLocation.indexOf(oldLocation)) {\n                return 'left';\n            }\n            if (newLocation.length < oldLocation.length && !oldLocation.indexOf(newLocation)) {\n                return 'right';\n            }\n        }\n         \n        return me.getDirection();\n    },\n\n    // override add to show animation when children are added\n    add: function (items) {\n        var me = this,\n            animations, i;\n\n        if (!Ext.isArray(items)) {\n            items = [items];\n        }\n\n        animations = me.createAnimations();\n\n        for (i = 0; i < items.length; i++) {\n            me.addAnimationConfigs(items[i]);\n        }\n\n        me.callParent(arguments);\n\n        if (me.initial) {\n            // don't show animation on initial render\n            animations.showAnimation = null;\n            me.initial = false;\n        }\n\n        items.forEach(function (item) { // need a closure for the RAF\n            item.setStyle({ visibility: 'visible' });\n            item.show(animations.showAnimation);\n\n            // override destroy to first hide then destroy\n            var originalDestroy = item.destroy.bind(item);\n            item.destroy = me.destroyChild.bind(me, item, originalDestroy);\n        });\n    },\n\n    insert: function (index, item) {\n        // order doesn't matter since we're using a floating layout\n        this.add(item);\n    },\n\n    destroyChild: function (item, originalDestroy) {\n        var me = this,\n            loc = location.href,\n            direction, hideAnimation, type;\n        \n        if (item.animatingDestroy) {\n            return;\n        }\n\n        me.oldLocation = me.newLocation || loc;\n        me.newLocation = loc;\n\n        hideAnimation = me.createAnimations().hideAnimation;\n        type = me.getType();\n        direction = me.computeDirection();\n\n        if (type === 'cover') {\n            item.setZIndex(direction === 'left' || direction === 'top' ? 0 : 2);\n        } else if (type === 'reveal') {\n            item.setZIndex(direction === 'left' || direction === 'top' ? 2 : 0);\n        } \n\n        item.animatingDestroy = true;\n\n        if (item.activeAnimation) {\n            item.activeAnimation.stop();\n        }\n\n        if (hideAnimation.type === 'extreact-delay') {\n            Ext.defer(originalDestroy, hideAnimation.duration);\n        } else {\n            item.on('hide', originalDestroy);\n            item.hide(hideAnimation);\n        }\n    },\n\n    addAnimationConfigs: function (child) {\n        child.setConfig({\n            zIndex: 1,\n            top: 0,\n            left: 0,\n            bottom: 0,\n            right: 0,\n            style: {\n                // prevent new view from \"flashing\" in before animating in safari\n                visibility: 'hidden'\n            }\n        });\n    },\n\n    createAnimations: function () {\n        var me = this, \n            type = me.getType(),\n            duration = me.getDuration(),\n            easing = me.getEasing(),\n            direction = me.computeDirection();\n\n        if (type === 'reveal') {\n            if (direction === 'left' || direction === 'up') {\n                return {\n                    showAnimation: null,\n                    hideAnimation: {\n                        type: 'slideOut',\n                        easing: easing,\n                        direction: direction,\n                        duration: duration\n                    }\n                };\n            }\n\n            return {\n                showAnimation: {\n                    type: 'slideIn',\n                    easing: easing,\n                    direction: direction,\n                    duration: duration\n                },\n                hideAnimation: {\n                    type: 'extreact-delay',\n                    duration: duration\n                }\n            };\n        }\n        \n        if (type === \"cover\") {\n            if (direction === 'left' || direction === 'up') {\n                return {\n                    showAnimation: {\n                        type: 'slideIn',\n                        easing: easing,\n                        direction: direction,\n                        duration: duration\n                    },\n                    hideAnimation: {\n                        type: 'extreact-delay',\n                        duration: duration\n                    }\n                };\n            }\n\n            return {\n                showAnimation: null,\n                hideAnimation: {\n                    type: 'slideOut',\n                    easing: easing,\n                    direction: direction,\n                    duration: duration\n                }\n            };\n        }\n\n        return {\n            showAnimation: {\n                type: type + 'In',\n                easing: easing,\n                direction: direction,\n                duration: duration\n            },\n            hideAnimation: {\n                type: type + 'Out',\n                easing: easing,\n                direction: direction,\n                duration: duration\n            }\n        };\n    }    \n});\n"]}